"use strict";(()=>{var e={};e.id=740,e.ids=[740],e.modules={11185:e=>{e.exports=require("mongoose")},20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},43380:(e,o,r)=>{r.r(o),r.d(o,{originalPathname:()=>g,patchFetch:()=>f,requestAsyncStorage:()=>d,routeModule:()=>c,serverHooks:()=>m,staticGenerationAsyncStorage:()=>p});var n={};r.r(n),r.d(n,{POST:()=>l});var t=r(16078),s=r(68203),a=r(24960),i=r(20049),u=r(21899);if(function(){var e=Error("Cannot find module '@/src/controllers/authController'");throw e.code="MODULE_NOT_FOUND",e}(),function(){var e=Error("Cannot find module '@/src/utils/token'");throw e.code="MODULE_NOT_FOUND",e}(),!process.env.JWT_SECRET)throw Error("JWT_SECRET is not defined");async function l(e){await (0,u.Z)();try{let{email:o,password:r}=await e.json();console.log("로그인 요청 받음:",{email:o,password:"********"});let n=await Object(function(){var e=Error("Cannot find module '@/src/controllers/authController'");throw e.code="MODULE_NOT_FOUND",e}())({email:o,password:r});if(console.log("로그인 결과:",n),!n.success||!n.user)return console.log("로그인 실패:",n.message),i.NextResponse.json({success:!1,message:n.message||"로그인 실패"},{status:401});{let e=Object(function(){var e=Error("Cannot find module '@/src/utils/token'");throw e.code="MODULE_NOT_FOUND",e}())(n.user.id.toString()),o=i.NextResponse.json({success:!0,message:"로그인 성공",user:{id:n.user.id,email:n.user.email,username:n.user.username}});return o.cookies.set("token",e,{httpOnly:!0,secure:!0,sameSite:"strict",maxAge:86400}),o}}catch(e){return console.error("로그인 오류:",e),i.NextResponse.json({success:!1,message:"로그인 중 오류가 발생했습니다."},{status:500})}}let c=new t.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/api/login/route",pathname:"/api/login",filename:"route",bundlePath:"app/api/login/route"},resolvedPagePath:"C:\\Users\\이지은 선임\\2u_lab\\2u_tubelab\\frontend\\app\\api\\login\\route.ts",nextConfigOutput:"",userland:n}),{requestAsyncStorage:d,staticGenerationAsyncStorage:p,serverHooks:m}=c,g="/api/login/route";function f(){return(0,a.patchFetch)({serverHooks:m,staticGenerationAsyncStorage:p})}},21899:(e,o,r)=>{r.d(o,{Z:()=>i});var n=r(11185),t=r.n(n);let s=process.env.MONGODB_URI;if(!s)throw Error("Please define the MONGODB_URI environment variable inside .env.local");let a=global.mongoose;a||(a=global.mongoose={conn:null,promise:null});let i=async function(){if(a.conn)return a.conn;a.promise||(a.promise=t().connect(s,{bufferCommands:!1}).then(e=>e));try{a.conn=await a.promise}catch(e){throw a.promise=null,e}return a.conn}}};var o=require("../../../webpack-runtime.js");o.C(e);var r=e=>o(o.s=e),n=o.X(0,[130,221],()=>r(43380));module.exports=n})();